<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
<ol start="3" style="list-style-type: lower-alpha">
<li>Subsetting a dataframe with dplyr</li>
</ol> • shroom</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="&lt;ol start=" style="list-style-type: lower-alpha">
</head>
<body>
<li>Subsetting a dataframe with dplyr</li>
" /&gt;

<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shroom</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a1-introduction.html">a) Introduction to the shroom package</a>
    </li>
    <li>
      <a href="../articles/a2-intro_to_ind_project_questions.html">a) Introduction to shroom</a>
    </li>
    <li>
      <a href="../articles/b-loading_the_shroom_package.html">b) Loading the shroom package</a>
    </li>
    <li>
      <a href="../articles/c-subsetting_a_dataframe_with_dplyr.html">c) Subsetting a dataframe with dplyr</a>
    </li>
    <li>
      <a href="../articles/d-summarizing_data_with_dplyr.html">d) Summarizing data with dplyr</a>
    </li>
    <li>
      <a href="../articles/f1-analysis_walkthrough_t_test_and_friends.html">f) Analysis walthrough: t-test and friends</a>
    </li>
    <li>
      <a href="../articles/f3-analysis_walkthrough_2-way_ANOVA.html">f) Analysis walthrough: 2-way factorial model</a>
    </li>
    <li>
      <a href="../articles/f4-analysis_walkthrough_nested_ANOVA.html">f) Analysis walthrough: 2-way factorial model</a>
    </li>
    <li>
      <a href="../articles/g1-calculating_effect_sizes_with_metafor.html">e) Calculating effect sizes using the metafor package</a>
    </li>
    <li>
      <a href="../articles/g2-analysis_of_difference_scores.html">f) Analysis of difference scores: thinking about effect sizes, sample sizes &amp; effect size variances</a>
    </li>
    <li>
      <a href="../articles/s1-stub-probablistic_index_models.html">s1) Stub - Probablistic index models</a>
    </li>
    <li>
      <a href="../articles/y-creating_a_package.html">w) Creating this package</a>
    </li>
    <li>
      <a href="../articles/z-build_and_rebuild_package.html">z) Building and rebuilding vignettes</a>
    </li>
    <li>
      <a href="../articles/z2-building_a_package.html">z2) Building and rebuilding vignettes - orig</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1><ol start="3" style="list-style-type: lower-alpha">
<li>Subsetting a dataframe with dplyr</li>
</ol></h1>
                        <h4 class="author">Nathan Brouwer</h4>
            
            <h4 class="date">2018-11-28</h4>
      
      
      <div class="hidden name"><code>c-subsetting_a_dataframe_with_dplyr.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This tutorial will show you how to remove unwanted columns and subset particular rows from a dataset.</p>
<p>The shroom package contains a dataset with thousands of data points collected by over 200 students in 14 class sections researching 18 different alleles of 6 different genes For many analyses and explorations of this data we’ll want to consider a subset of the data, such as data from:</p>
<ol style="list-style-type: decimal">
<li>A single student in a single section of the course</li>
<li>All 3 alleles studied within a single section</li>
<li>All 18 alleles studied within a section</li>
<li>A single gene across the 14 section</li>
</ol>
</div>
<div id="preliminaries" class="section level2">
<h2 class="hasAnchor">
<a href="#preliminaries" class="anchor"></a>Preliminaries</h2>
<div id="loading-the-shroom-package-wingscores-data" class="section level3">
<h3 class="hasAnchor">
<a href="#loading-the-shroom-package-wingscores-data" class="anchor"></a>Loading the shroom package &amp; wingscores data</h3>
<p>If you haven’t already, download the shroom package. See the vignette “Loading the shroom package” for details.</p>
<p>Load <strong>shroom</strong> into your current R session using library()</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shroom)</code></pre></div>
<p>Load the <strong>wingscores</strong> data into your current R sessions</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"wingscores"</span>)</code></pre></div>
</div>
<div id="load-packages" class="section level3">
<h3 class="hasAnchor">
<a href="#load-packages" class="anchor"></a>Load packages</h3>
<p>We’ll use tools from the “tidyverse” to subset the data, particularly the dplyr functions</p>
<ul>
<li>filter</li>
<li>select</li>
</ul>
<div id="loading-the-dplyr-package" class="section level4">
<h4 class="hasAnchor">
<a href="#loading-the-dplyr-package" class="anchor"></a>Loading the dplyr package</h4>
<p>We’ll also need the dplyr package.</p>
<p>Download it if you haven’t already.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## don't run this if you have already downloaded dplyr before
<span class="co"># (remove "#" to run code)</span>

<span class="co"># install.packages("dplyr")</span></code></pre></div>
<p>Load dplyr into your current R sessions</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span></code></pre></div>
</div>
</div>
</div>
<div id="getting-to-know-wingscores-data" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-to-know-wingscores-data" class="anchor"></a>Getting to know wingscores data</h2>
<p>The wingscores data is big: 7754 rows by 16 columns</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(wingscores)
<span class="co">#&gt; [1] 7754   16</span>
<span class="kw">nrow</span>(wingscores)
<span class="co">#&gt; [1] 7754</span>
<span class="kw">ncol</span>(wingscores)
<span class="co">#&gt; [1] 16</span></code></pre></div>
<p>Each row is data on a <em>single fly</em> scored for “wing crinklieness” by a student <em>single studnet</em>.</p>
<p>Many of the columns are not necessary for carrying out an analysis. For example the column “file” is just the original Excel file that the student entered their data in to.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(wingscores<span class="op">$</span>file, <span class="dv">5</span>)
<span class="co">#&gt; Wing_189.xlsm Wing_243.xlsm Wing_169.xlsm Wing_152.xlsm       (Other) </span>
<span class="co">#&gt;            72            72            69            67          7474</span></code></pre></div>
</div>
<div id="subsetting-the-shroom-wingscores-data" class="section level2">
<h2 class="hasAnchor">
<a href="#subsetting-the-shroom-wingscores-data" class="anchor"></a>Subsetting the shroom wingscores data</h2>
<p>Many of the columns in the dataset are not informative for any kind of analysis. For simple, preliminary data exploration and analyses we also don’t want all ~7500 rows of data.</p>
<p>What we’ll do next is</p>
<ul>
<li>Remove some un-needed columns using dplyr::select</li>
<li>Select a subset of columns with dplyr::filter</li>
</ul>
<div id="remove-un-needed-columns-with-dplyrselect" class="section level3">
<h3 class="hasAnchor">
<a href="#remove-un-needed-columns-with-dplyrselect" class="anchor"></a>Remove un-needed columns with dplyr::select</h3>
<p>We can remove a single column by using the syntax “select(-column.name)”, with a “-” in front of the column name to indicate we want it removed. Note that the word file <em>does not</em> have quotes around it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wingscores.no.file.name &lt;-<span class="st"> </span>wingscores <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>file)</code></pre></div>
<p>The original dataframe had 16 columns; without the “file” column it just has 15.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(wingscores)
<span class="co">#&gt; [1] 16</span>
<span class="kw">ncol</span>(wingscores.no.file.name)
<span class="co">#&gt; [1] 15</span></code></pre></div>
<p>We can just write out all the columns we don’t want, putting a “-” before each column name. Again, no quotation marks involved.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wingscores2 &lt;-<span class="st"> </span>wingscores <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                   </span><span class="kw">select</span>(<span class="op">-</span>gene,
                          <span class="op">-</span>seat,
                          <span class="op">-</span>section,
                          <span class="op">-</span>loaded,
                          <span class="op">-</span>stock.num,
                          <span class="op">-</span>file,
                          <span class="op">-</span>temp.C,
                          <span class="op">-</span>group,
                          <span class="op">-</span>gene.allele)</code></pre></div>
<p>The dataframe now has only 7 columns</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(wingscores2)
<span class="co">#&gt; [1] 7754    7</span></code></pre></div>
</div>
<div id="subset-particular-rows-with-filter" class="section level3">
<h3 class="hasAnchor">
<a href="#subset-particular-rows-with-filter" class="anchor"></a>Subset particular rows with filter</h3>
<p>There are about 250 students and each is assigned a sequential ID number.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(wingscores2<span class="op">$</span>student.ID)
<span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="co">#&gt;     1.0    61.0   134.0   126.9   187.0   251.0</span></code></pre></div>
<p>If we just want to look at the #1’s (the 1st student) we can use the filter() function. Note the double equals signs (“==”) means “equals to” and is different than a single equals sign “=”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wingscores_s1 &lt;-<span class="st"> </span>wingscores2 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">filter</span>(student.ID <span class="op">==</span><span class="st">  </span><span class="dv">1</span>)</code></pre></div>
<p>This results in a dataframe with just the 60 flies which student 1 worked on.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(wingscores_s1)
<span class="co">#&gt; [1] 60  7</span></code></pre></div>
</div>
<div id="subsetting-by-multiple-conditions-use" class="section level3">
<h3 class="hasAnchor">
<a href="#subsetting-by-multiple-conditions-use" class="anchor"></a>Subsetting by multiple conditions use “&amp;”</h3>
<p>We can subset by multiple conditions using “&amp;” between conditions. Let’s subset just the female (karyotype of XX, coded “F” in the data) flies from student 1.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wingscores_s1F &lt;-<span class="st"> </span>wingscores_s1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                     </span><span class="kw">filter</span>(student.ID <span class="op">==</span><span class="st">  </span><span class="dv">1</span> <span class="op">&amp;</span>
<span class="st">                                   </span>sex <span class="op">==</span><span class="st"> "F"</span>)</code></pre></div>
<p>There’s one row of data for each fly. Student 1 looked at just 24 flies.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(wingscores_s1F)
<span class="co">#&gt; [1] 24  7</span></code></pre></div>
</div>
<div id="subsetting-by-multiple-conditions-use-in" class="section level3">
<h3 class="hasAnchor">
<a href="#subsetting-by-multiple-conditions-use-in" class="anchor"></a>Subsetting by multiple conditions use “%in%”</h3>
<p>We can also subset by multiple conditions using %in% and a vector of possibilities.</p>
<p>Students 1, 2 and 3 are all in section 1 of the lab and all worked on different alleles of the same gene, <em>able</em>. I can select them by filtering by all student IDs “in” a vector (a type of R object) containing the numbers 1, 2 and 3.</p>
<p>The function “in” is a bit odd: %in%</p>
<p>A vector possibilities would look like this: c(1,2,3)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wngscrs_sxn1_able &lt;-<span class="st"> </span>wingscores.no.file.name <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                     </span><span class="kw">filter</span>(student.ID <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</code></pre></div>
<p>These 3 students together looked 159 flies</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(wngscrs_sxn1_able)
<span class="co">#&gt; [1] 159  15</span></code></pre></div>
<p>This code below is equivalent to what we just did, using c(1:3) instead of c(1,2,3)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wngscrs_sxn1_able &lt;-<span class="st"> </span>wingscores.no.file.name <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                     </span><span class="kw">filter</span>(student.ID <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>))</code></pre></div>
<p>Similarly, I can subset the first 18 students, who all were in the same lab section. “c(1:18)” Produces a vector containing all numbers 1 to 18.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wngscrs_sxn1 &lt;-<span class="st"> </span>wingscores.no.file.name <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                     </span><span class="kw">filter</span>(student.ID <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">18</span>))</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#preliminaries">Preliminaries</a></li>
      <li><a href="#getting-to-know-wingscores-data">Getting to know wingscores data</a></li>
      <li><a href="#subsetting-the-shroom-wingscores-data">Subsetting the shroom wingscores data</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  
</body>
</html>
